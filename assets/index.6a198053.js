(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function l(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?e.credentials="include":t.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function i(t){if(t.ep)return;t.ep=!0;const e=l(t);fetch(t.href,e)}})();const T="bab2525,2022-10-30,v0.1.1",E=`## v0.1.1 (2022-10-29)

### Features

- \u589E\u52A0\u591C\u95F4\u6A21\u5F0F\u652F\u6301

## v0.1.0 (2022-10-25)

### Features

- \u589E\u52A0\u65B0\u80FD\u6E90\u8F66\u652F\u6301

### Fixed

- \u90E8\u5206\u624B\u673A\u5BBD\u5EA6\u8D85\u51FA\u5C4F\u5E55([#1])

[#1]: https://github.com/thincen/carplate/issues/1

## v0.0.1 (2022-10-22)

### Features

- \u5B8C\u6210\u57FA\u672C\u529F\u80FD`,I="modulepreload",$=function(n){return"/carplate/"+n},k={},q=function(r,l,i){return!l||l.length===0?r():Promise.all(l.map(t=>{if(t=$(t),t in k)return;k[t]=!0;const e=t.endsWith(".css"),o=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${o}`))return;const a=document.createElement("link");if(a.rel=e?"stylesheet":I,e||(a.as="script",a.crossOrigin=""),a.href=t,document.head.appendChild(a),e)return new Promise((c,s)=>{a.addEventListener("load",c),a.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${t}`)))})})).then(()=>r())};function O(n={}){const{immediate:r=!1,onNeedRefresh:l,onOfflineReady:i,onRegistered:t,onRegisteredSW:e,onRegisterError:o}=n;let a,c;const s=async(p=!0)=>{await c};async function g(){if("serviceWorker"in navigator){const{Workbox:p,messageSW:_}=await q(()=>import("./workbox-window.prod.es5.d2780aeb.js"),[]);a=new p("/carplate/sw.js",{scope:"/carplate/",type:"classic"}),a.addEventListener("activated",d=>{d.isUpdate?window.location.reload():i==null||i()}),a.register({immediate:r}).then(d=>{e?e("/carplate/sw.js",d):t==null||t(d)}).catch(d=>{o==null||o(d)})}}return c=g(),s}let m=window.devicePixelRatio<2||3;m*=2;let W=10;function L(n,r){let l=document.getElementById("canvas"),i="#001B7A",t=440,e=140;r.toLowerCase()==="greenblack"&&(t=480),l.width=t*m,l.height=e*m;const o=l.getContext("2d");if(o.scale(m,m),r.toLowerCase()==="greenblack"){D(o,n),l.style.display="block";return}P(o,t,e,W,i),A(o,e),R(o,n),l.style.display="block"}function R(n,r){let i="\u4EAC\u6D25\u5180\u664B\u8499\u8FBD\u5409\u9ED1\u6CAA\u82CF\u6D59\u7696\u95FD\u8D63\u9C81\u8C6B\u9102\u6E58\u7CA4\u6842\u743C\u6E1D\u5DDD\u8D35\u4E91\u85CF\u9655\u7518\u9752\u5B81\u65B0\u6E2F\u6FB3\u4F7F\u9886\u5B66\u8B66".indexOf(r[0]),t=0,e=0;for(t;t<4;t++)if(i<(t+1)*9){e=i-t*9;break}let o=new Image;o.onload=function(){n.drawImage(o,90*e,180*t,90,180,15,25,45,90),B(n,r)},o.src="img/word.png"}function P(n,r,l,i,t){n.fillStyle=t;let e=1.5;n.beginPath(),v(n,0,0,r,l,i+e),n.fill(),n.beginPath(),n.fillStyle="white",v(n,e,e,r-e*2,l-e*2,i),n.fill(),e+=3,n.beginPath(),n.fillStyle=t,v(n,e,e,r-e*2,l-e*2,i-3),n.arc(134,70,5,0,Math.PI*2,!0),n.fill("evenodd")}function A(n,r){let l=100,i=12.5,t=100+15+210,e=r-12.5;n.strokeStyle="white",n.lineWidth=8,n.lineCap="round",n.beginPath(),n.moveTo(l,i),n.lineTo(l+15,i),n.moveTo(l,e),n.lineTo(l+15,e),n.moveTo(t,i),n.lineTo(t+15,i),n.moveTo(t,e),n.lineTo(t+15,e),n.stroke()}function B(n,r){let l="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";for(let i=1;i<r.length;i++){let t=l.indexOf(r[i]),e=0,o=0;if(r[i].charCodeAt()>=48&&r[i].charCodeAt()<=57)e=3,o=t-26;else for(e;e<4;e++)if(t<(e+1)*10){o=t-e*10;break}let a=new Image;a.onload=function(){i==1&&n.drawImage(a,90*o,180*e,90,180,15+45+12,25,45,90),i>1&&n.drawImage(a,90*o,180*e,90,180,151+(i-2)*(12+45),25,45,90)},a.src="img/letter.png"}}function v(n,r,l,i,t,e){n.moveTo(r,l+e),n.lineTo(r,l+t-e),n.quadraticCurveTo(r,l+t,r+e,l+t),n.lineTo(r+i-e,l+t),n.quadraticCurveTo(r+i,l+t,r+i,l+t-e),n.lineTo(r+i,l+e),n.quadraticCurveTo(r+i,l,r+i-e,l),n.lineTo(r+e,l),n.quadraticCurveTo(r,l,r,l+e)}function D(n,r){let l=new Image;l.onload=function(){n.drawImage(l,0,0,1695,498,0,0,480,140);let i=new Image;i.onload=function(){N(n,r,i),H(n,r,i)},i.src="img/green.png"},l.src="img/evbg.png"}function N(n,r,l){let t="\u4EAC\u6D25\u5180\u664B\u8499\u8FBD\u5409\u9ED1\u6CAA\u82CF\u6D59\u7696\u95FD\u8D63\u9C81\u8C6B\u9102\u6E58\u7CA4\u6842\u743C\u6E1D\u5DDD\u8D35\u4E91\u85CF\u9655\u7518\u9752\u5B81\u65B0".indexOf(r[0]),e=4,o=0;for(e;e<8;e++)if(t<(e-4+1)*9){o=t-(e-4)*9;break}n.drawImage(l,45*o,90*e,45,90,15.5,25,45,90)}function H(n,r,l){let i="0123456789ABCDEFGHJKLMNPQRSTUVWXYZ";for(let t=1;t<r.length;t++){let e=i.indexOf(r[t]),o=0,a=0;if(r[t].charCodeAt()>=65&&r[t].charCodeAt()<=90){for(o=1;o<4;o++)if(e<(o+1)*10){a=e-o*10;break}}else a=e;t==1&&n.drawImage(l,43*a,90*o,43,90,15.5+45+9,25,43,90),t>1&&n.drawImage(l,43*a,90*o,43,90,161.5+(t-2)*(9+43),25,43,90)}}class y{constructor(r,l="blueWhite",i=""){this.id=Math.round(new Date().getTime()/1e3),this.value=r,this.category=l,this.comment=i}static toLocalString(r){let l=new Date(r*1e3),i=l.getFullYear(),t=l.getMonth()+1,e=l.getDate();return`${i}/${t<10?"0"+t:t}/${e<10?"0"+e:e} ${l.toLocaleTimeString("chinese",{hour12:!1})}`}timestamp(){return this.id}static category(r){switch(r){case"blueWhite":return"\u84DD\u5E95\u767D\u5B57";case"greenBlack":return"\u7EFF\u5E95\u9ED1\u5B57"}}}const b="carplates",w=document.querySelector("#cacheInfo");class M{constructor(){this.data=JSON.parse(window.localStorage.getItem(b))||[]}clearCache(){window.localStorage.setItem(b,"[]"),this.data=[]}saveToCache(){window.localStorage.setItem(b,JSON.stringify(this.data))}addToCache(r,l,i){let t=new y(r,l,i);this.data.push(t),this.saveToCache()}renderCache(){if(w.innerHTML=`<div id="cacheCount" class="tips">
<div >\u68C0\u7D22\u5230\u4FE1\u606F${this.data.length}\u6761</div>
<div><button class="btn-danger" id="removeAllCache" >RemoveAll</button></div></div>`,this.data.length===0){w.innerHTML=`
<div class="tips"><br>
<p>---\u8FD8\u6CA1\u6709\u7F13\u5B58\u6570\u636E---</p>
<br>
<div class="help">
<p>Carplate</p>
\u611F\u8C22 <a href="https://github.com/thincen/carplate"><u>longwosion/carplate</u></a> \u5206\u4EAB<br>
\u6839\u636E <code>GA36-2018</code> \u751F\u6210\u5C0F\u533A\u95E8\u7981\u5DF2\u767B\u8BB0\u8F66\u724C, \u501F\u7528\u624B\u673A\u6D4B\u8BD5\u8F66\u724C\u8BC6\u522B<br> 
<strong>\u672C\u9879\u76EE\u4EC5\u7528\u4E8E\u5B66\u4E60\u7814\u7A76\u4F7F\u7528, \u8BF7\u9075\u5B88\u76F8\u5173\u6CD5\u5F8B\u6CD5\u89C4, \u5C06\u672C\u9879\u76EE\u7684\u4EFB\u4F55\u5185\u5BB9\u7528\u4E8E\u5546\u4E1A\u6216\u975E\u6CD5\u76EE\u7684, \u540E\u679C\u4F5C\u8005\u6982\u4E0D\u8D1F\u8D23\u3002</strong>
<ul>
<p>\u521D\u6B21\u4F7F\u7528</p>
<li><strong style="color:red;">\u26A0\uFE0F\u5173\u95ED\u624B\u673A\u81EA\u52A8\u65CB\u8F6C;\u8C03\u8282\u5C4F\u5E55\u4EAE\u5EA6\u80FD\u591F\u5E2E\u52A9\u8BC6\u522B</strong></li>
<li>\u79BB\u7EBF\u4F7F\u7528: <br>\u5F39\u51FA\u53EF\u79BB\u7EBF\u4F7F\u7528\u63D0\u793A\u540E\u6DFB\u52A0\u5230\u624B\u673A\u4E3B\u5C4F\u5E55</li>
<li>\u7F13\u5B58\u8F66\u724C: <br>\u5C06\u8F66\u724C\u4FE1\u606F\u4FDD\u5B58\u5230\u672C\u673A</li>
<li>\u52A0\u8F7D\u7F13\u5B58: <br>\u8F66\u724C\u5217\u8868\u52A0\u8F7D\u5B8C\u6210\u540E, \u70B9\u51FB\u5BF9\u5E94\u8F66\u724C\u663E\u793A\u56FE\u7247</li>
<li>\u663E\u793A\u8F66\u724C:<br>\u5148\u663E\u793A\u7F29\u7565\u56FE(\u5176\u5B9E\u662Fcanvas), \u70B9\u51FB\u7F29\u7565\u56FE\u4F1A\u653E\u5927\u663E\u793A\u65B9\u4FBF\u8BC6\u522B. <br>\u70B9\u51FB\u5927\u56FE, \u56DE\u5230\u4E3B\u9875\u9762</li>
</ul>
</div></div>
`,document.querySelector("#canvas").style.display="none";return}let r=document.createElement("ul");r.classList.add("list","tips"),this.data.forEach((l,i)=>{let t=document.createElement("li");t.setAttribute("data-cache-id",i),t.innerHTML=`
       <div class="col2">
        <div class="row2">
            <p class="cahceDate">${y.toLocalString(l.id)}</p>
            <p class="cacheCategory">${y.category(l.category)}</p>
            <p class="cacheValue">${l.value}</p>
        </div>
        <p class="cacheComment">${l.comment}</p>
       </div>
       <div><button class="cacheDelBtn btn-danger" data-cache-id="${i}" 
       >\u5220\u9664</button></div>`,r.appendChild(t)}),w.appendChild(r),document.querySelector("#removeAllCache").addEventListener("click",()=>{!confirm("\u274C\u786E\u5B9A\u5220\u9664\u6240\u6709\u7F13\u5B58\u7684\u8F66\u724C\u4FE1\u606F?")||(this.clearCache(),this.renderCache())}),r.addEventListener("click",l=>{let i=l.target.dataset.cacheId;if(l.target.nodeName=="BUTTON"){if(!confirm("\u2757\uFE0F\u786E\u5B9A\u5220\u9664 "+this.data[i].value+" ?"))return;this.data.splice(parseInt(i),1),this.saveToCache(),this.renderCache();return}let t=-1;(l.composedPath()||l.path).forEach(o=>{if(o.nodeName=="LI"&&t==-1&&(t=o.dataset.cacheId),o.className=="list tips"){L(this.data[t].value,this.data[t].category);let a=document.querySelector("#canvas");a.style.maxWidth=window.innerWidth+"px",a.style.maxHeight=window.innerWidth/440*140+"px",window.scrollTo(0,document.documentElement.clientHeight);return}})})}}function h(n,r){let l=/^<li>.+<\/li>/;switch(n){case"h1":l=/^#\s(.+)/;break;case"h2":l=/^##\s(.+)/;break;case"h3":l=/^###\s(.+)/;break;case"li":l=/^-\s(.+)/;break}let i=r.match(l);return i!=null?`<${n}>${i[1]}</${n}>`:""}function U(n){let r=n.replace(/^\s+/gm,"").split(`
`);for(let e=0;e<r.length;e++){let o=/^\[#\d+\]:\shttps:.+$/;r[e].match(o)!=null&&(r[e]="");let a=h("h3",r[e]);if(a!=""){h("isParsed",r[e-1])!=""?r[e]=`</ul>${a}`:r[e]=`${a}<ul>`;continue}let c=h("h1",r[e]);if(c!=""){r[e]=c;continue}let s=h("h2",r[e]);if(s!=""){r[e]=s;continue}let g=h("li",r[e]);if(g!=""){r[e]=g;continue}}let l=/\((\[#\d+\])\)/gm,i=r.join("").match(l),t=r.join("");return i.forEach(e=>{let o=/\d+/,a=e.match(o)[0];t=t.replace("[#"+a+"]","<a href=https://github.com/thincen/carplate/issues/"+a+">#"+a+"</a>")}),t=t+"</ul>",t}O({onNeedRefresh(){alert(`\u{1F389}\u8FD9\u662F\u6211\u7684\u4E00\u4E2A\u6D4B\u8BD5.onNeedRefresh
\u6536\u5230\u6B64\u6761\u6D88\u606F\u8BF4\u660E\u7248\u672C\u5DF2\u66F4\u65B0

\u5982\u679C\u4F60\u7684\u672C\u673A\u7F13\u5B58\u53D7\u5230\u7834\u574F\u662F\u672A\u4FEE\u590D\u7684\u9519\u8BEF`)},onOfflineReady(){alert("\u79BB\u7EBF\u529F\u80FD\u521D\u59CB\u5B8C\u6210,\u6DFB\u52A0\u5230\u684C\u9762\u4EAB\u53D7\u539F\u751F\u5E94\u7528\u4F53\u9A8C")}});let u=document.getElementById("canvas"),f=new M;window.onload=()=>{document.body.style.maxWidth=innerWidth,f.renderCache(),F()};function F(){let n=T.split(","),r=n[0],l=n[1],i=n[2].replace(/\s+/g,""),t=`Commit: <a id="commitLink" href="javascript:void(0);" >${r}</a> | Date: ${l}`;i.length!=0&&(t=`<a href="https://github.com/thincen/carplate/tree/main" >${i}</a> | ${t}`),document.querySelector("#version").innerHTML=t;let e=document.querySelector("#field-log");document.querySelector("#commitLink").addEventListener("click",()=>{e.style.visibility="visible",document.querySelector("#field-cache").style.display="none",document.querySelector(".changelog").innerHTML=U(E),document.querySelector(".close").addEventListener("click",()=>{document.querySelector("#field-cache").style.display="block",e.style.visibility="hidden"})})}let S=document.querySelector("#cacheCheckbox");S.addEventListener("change",()=>{S.checked?document.querySelector(".checkbox").style.backgroundColor="#6c5ce7":(document.querySelector(".checkbox").style.backgroundColor="#ccc",document.querySelector(".checkbox").style.borderColor="#6c5ce7")});let C=document.querySelector("#carplate");document.querySelector(".submit").addEventListener("click",n=>{if(!V())return;let r=C.value.toUpperCase(),l=document.getElementById("type").value,i=document.querySelector("#comment").value;i=i.replace(/<script.+>/gmi,"");let t=document.querySelector("#cacheCheckbox").checked,e=f.data.length;if(t){let a=!1;for(let c=0;c<e;c++)if(r==f.data[c].value){a=!0;break}a||(f.addToCache(r,l,i),f.renderCache())}L(r,l);let o=l=="greenBlack"?480:440;u.style.margintop="1rem",u.style.maxWidth=window.innerWidth+"px",u.style.maxHeight=window.innerWidth/o*140+"px",window.scrollTo(0,document.documentElement.clientHeight)});u.addEventListener("click",function(){var n=new Image;n.src=u.toDataURL("image/png"),n.classList="resImg",n.style.width=window.innerHeight-2+"px",n.style.borderRadius=window.innerHeight/440*10+"px",document.body.appendChild(n),document.getElementById("app").style.display="none",document.body.style.backgroundColor="black",n.addEventListener("click",function(){document.getElementById("app").style.display="block",u.style.display="none",n.remove(),document.body.removeAttribute("style")})});function V(){let n=C.value.toUpperCase(),r=document.getElementById("type").value,l=!(r.indexOf("blue")<0),i=!(r.indexOf("green")<0);const t="\u4EAC\u6D25\u5180\u664B\u8499\u8FBD\u5409\u9ED1\u6CAA\u82CF\u6D59\u7696\u95FD\u8D63\u9C81\u8C6B\u9102\u6E58\u7CA4\u6842\u743C\u6E1D\u5DDD\u8D35\u4E91\u85CF\u9655\u7518\u9752\u5B81\u65B0\u6E2F\u6FB3\u4F7F\u9886\u5B66\u8B66",e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",o="1234567890";if(n=n.replace(/\s+/gm,""),n.length!=7&&l||n.length!=8&&i)return alert(`\u8F93\u5165\u8F66\u724C\u957F\u5EA6\u4E3A${n.length},\u548C\u8F66\u724C\u7C7B\u578B\u4E0D\u7B26`),!1;if(t.indexOf(n[0])<0)return alert(`\u4E0D\u652F\u6301"${n[0]}"\u4E3A\u7B2C1\u4E2A\u5B57\u7B26\u7684\u8F66\u724C`),!1;if(e.indexOf(n[1])<0)return alert(`\u4E0D\u652F\u6301"${n[1]}"\u4E3A\u7B2C2\u4E2A\u5B57\u7B26\u7684\u8F66\u724C?`),!1;for(let a=2;a<n.length;a++)if((l||i)&&(e+o).indexOf(n[a])<0)return alert(`
\u6682\u4E0D\u652F\u6301\u5305\u542B\u7279\u6B8A\u5B57\u7B26"${n[a]}"\u7684\u8F66\u724C`),!1;return C.value=n,!0}
